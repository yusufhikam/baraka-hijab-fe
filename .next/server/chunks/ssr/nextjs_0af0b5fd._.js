module.exports=[96424,a=>{"use strict";let b=(0,a.i(31498).default)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);a.s(["Plus",()=>b],96424)},54889,a=>{"use strict";let b=(0,a.i(31498).default)("minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);a.s(["Minus",()=>b],54889)},9981,a=>{"use strict";var b=a.i(72284),c=a.i(40265),d=a.i(48754),e=a.i(82677),f=a.i(82742);let g=async a=>{try{return(await e.default.post(`${f.baseURL}/checkout/prepare`,a)).data}catch(a){throw console.error("ðŸš€ ~ err:",a),a}},h=async a=>(await e.default.post(`${f.baseURL}/checkout/shipping`,a)).data,i=async()=>{try{return(await e.default.get(`${f.baseURL}/checkout`)).data}catch(a){throw console.error("ðŸš€ ~ err:",a),a}},j=async a=>(await e.default.post(`${f.baseURL}/checkout`,a)).data;var k=a.i(83231);function l({isCheckoutPage:a=!1}={}){let e=(0,d.useQueryClient)(),{data:f,isLoading:m}=(0,c.useQuery)({queryKey:["checkout_summary"],queryFn:()=>i(),enabled:!!a}),n=(0,b.useMutation)({mutationFn:a=>g(a),onSuccess:()=>{e.invalidateQueries({queryKey:["checkout_summary"]})},onError:a=>{let b=a.message;console.error("ðŸš€ ~ useCheckoutQuery ~ error:",b),k.toast.error("Failed to create checkout.",{description:b,duration:1e3,position:"top-right"})}});return{mutateCheckoutPrepare:n,mutateSetShipping:(0,b.useMutation)({mutationFn:a=>h(a),onSuccess:()=>{e.invalidateQueries({queryKey:["checkout_summary"]})},onError:a=>{let b=a.message;console.error("ðŸš€ ~ useCheckoutQuery ~ error:",b),k.toast.error("Failed to set shipping.",{description:b,duration:1e3,position:"top-right"})}}),checkoutSummary:f,isLoadingSummary:m,mutateCheckoutTransaction:(0,b.useMutation)({mutationFn:a=>j({address_id:a}),onSuccess:()=>{e.invalidateQueries({queryKey:["transactions"]})},onError:a=>{let b=a.message;console.error("ðŸš€ ~ useCheckoutQuery ~ error:",b),k.toast.error("Failed to create checkout.",{description:b,duration:1e3,position:"top-right"})}})}}a.s(["default",()=>l],9981)},26547,a=>{"use strict";var b=a.i(90767),c=a.i(10014),d=a.i(96424),e=a.i(54889);function f({icon:a="Minus",...f}){let g="Plus"===a?d.Plus:e.Minus;return(0,b.jsx)(c.Button,{variant:"ghost",type:"button",...f,size:"icon-sm",children:(0,b.jsx)(g,{})})}var g=a.i(82742);function h({onChange:a,value:c,isLoading:d}){return(0,b.jsxs)("section",{className:"flex items-center justify-between",children:[(0,b.jsx)(f,{icon:"Minus",onClick:()=>{a(Math.max(1,c-1))},className:(0,g.cn)("border border-black/30 bg-zinc-800 text-white hover:bg-black hover:text-white active:scale-90",1===c&&"pointer-events-none opacity-50",d&&"animate-pulse cursor-wait")}),(0,b.jsx)("input",{type:"number",onChange:b=>{b.preventDefault();let c=Math.min(99,Math.max(1,Number(b.target.value)));c>=1&&a(c)},disabled:d,value:c,className:"mx-2 h-8 w-10 max-w-20 rounded border border-black/30 bg-zinc-200 text-center font-semibold"}),(0,b.jsx)(f,{icon:"Plus",className:(0,g.cn)("border border-black/30 bg-zinc-800 text-white hover:bg-black hover:text-white active:scale-90",d&&"animate-pulse cursor-wait"),onClick:()=>{c>99||a(c+1)}})]})}a.s(["default",()=>h],26547)},21215,a=>{"use strict";let b=(0,a.i(31498).default)("dot",[["circle",{cx:"12.1",cy:"12.1",r:"1",key:"18d7e5"}]]);a.s(["Dot",()=>b],21215)},85912,55073,a=>{"use strict";var b=a.i(10584),c=a.i(72284),d=a.i(40265),e=a.i(48754),f=a.i(90680),g=a.i(83231);let h=["carts"],i=()=>{let a=(0,e.useQueryClient)();return(0,c.useMutation)({mutationFn:a=>f.cartApi.addToCart(a),onSuccess:()=>{a.invalidateQueries({queryKey:h}),g.toast.success("Product added to cart.",{duration:1e3,position:"top-right"})},onError:a=>{let b=a.message;g.toast.error("Failed to add product to cart.",{description:b,duration:1e3,position:"top-right"})}})},j=()=>{let a=(0,e.useQueryClient)();return(0,c.useMutation)({mutationFn:a=>f.cartApi.syncFromLocalStorage(a),onSuccess:()=>{a.invalidateQueries({queryKey:h}),g.toast.success("New product added to your cart.",{duration:1e3,position:"top-right"})},onError:a=>{let b=a.message;g.toast.error("Failed to syncronize cart.",{description:b,duration:1e3,position:"top-right"})}})},k=()=>{let a=(0,e.useQueryClient)();return(0,c.useMutation)({mutationFn:async a=>f.cartApi.updateCart(a),onSuccess:()=>{a.invalidateQueries({queryKey:h})},onError:a=>{let b=a.message;g.toast.error("Failed to update cart.",{description:b,duration:1e3,position:"top-right"})}})},l=()=>{let a=(0,e.useQueryClient)();return(0,c.useMutation)({mutationFn:a=>f.cartApi.deleteCart(a),onSuccess:()=>{a.invalidateQueries({queryKey:h}),g.toast.success("Product deleted from cart.",{duration:1e3,position:"top-right"})},onError:a=>{let b=a.message;g.toast.error("Failed to delete product from cart.",{description:b,duration:1e3,position:"top-right"})}})};a.s(["useAddToCartMutation",0,i,"useCartQuery",0,()=>{let{isAuthenticated:a}=(0,b.useAppSelector)(a=>a.auth);return(0,d.useQuery)({queryKey:h,queryFn:f.cartApi.getCarts,staleTime:15e3,enabled:a,refetchOnWindowFocus:!1})},"useDeleteCartMutation",0,l,"useSyncCartMutation",0,j,"useUpdateCartMutation",0,k],55073);var m=a.i(77729),n=a.i(5473),o=a.i(53424);function p(){let a=(0,o.usePathname)(),c=(0,b.useAppDispatch)(),{isAuthenticated:d,user:e}=(0,b.useAppSelector)(a=>a.auth),{carts:f}=(0,b.useAppSelector)(a=>a.cart),g=(0,m.useMemo)(()=>"/"===a,[a]),h=i(),p=j(),q=l(),r=k(),s=(0,m.useCallback)(a=>{if(d&&e)return h.mutate({product_variant_option_id:a.variant_option.id,quantity:a.quantity});c((0,n.addCartToGuestCart)(a))},[d,e,h,c]),t=(0,m.useCallback)(a=>{if(d)return q.mutate(a);c((0,n.deleteItemFromGuestCart)({variant_option_id:a}))},[d,q,c]),u=(0,m.useCallback)(a=>a.quantity<1?Promise.resolve():d?r.mutateAsync({product_variant_option_id:a.variant_option.id,quantity:a.quantity}):(c((0,n.updateCartInGuestCart)(a)),Promise.resolve()),[d,r,c]),v=(0,m.useMemo)(()=>f.map(a=>({product_variant_option_id:a.variant_option.id,quantity:a.quantity})),[f]);return{handleAddToCart:s,handleUpdateCart:u,handleDeleteCart:t,syncGuestCart:(0,m.useCallback)(()=>{(d||g)&&0!==f.length&&(p.mutate({carts:v}),c((0,n.removeGuestCart)()))},[d,f,v,p,c,g]),isSyncingLoading:p.isPending,isAddingLoading:h.isPending,isUpdatingLoading:r.isPending,isDeletingLoading:q.isPending}}a.s(["default",()=>p],85912)},92166,a=>{"use strict";var b=a.i(10584),c=a.i(55073),d=a.i(77729);function e(){let{isAuthenticated:a}=(0,b.useAppSelector)(a=>a.auth),{carts:e}=(0,b.useAppSelector)(a=>a.cart),{data:f,isLoading:g}=(0,c.useCartQuery)(),h=(0,d.useMemo)(()=>a?f?.data??[]:e,[a,f,e]);return{totalItems:(0,d.useMemo)(()=>a?f?.data.length:e.length,[a,f,e]),isLoadingCart:g,carts:h,serverCarts:f,guestCarts:e}}a.s(["default",()=>e])},87667,93959,a=>{"use strict";var b=a.i(90767),c=a.i(10014);let d=(0,a.i(31498).default)("handbag",[["path",{d:"M2.048 18.566A2 2 0 0 0 4 21h16a2 2 0 0 0 1.952-2.434l-2-9A2 2 0 0 0 18 8H6a2 2 0 0 0-1.952 1.566z",key:"1qbui5"}],["path",{d:"M8 11V6a4 4 0 0 1 8 0v5",key:"tcht90"}]]);a.s(["Handbag",()=>d],93959);var e=a.i(13738);function f(){return(0,b.jsxs)("section",{className:"inline-flex w-full flex-col items-center justify-center gap-2 p-4",children:[(0,b.jsx)(d,{}),(0,b.jsx)("p",{className:"font-geist font-semibold",children:"YOUR CART IS EMPTY"}),(0,b.jsxs)("div",{className:"mt-20 space-y-5 text-center",children:[(0,b.jsx)("h3",{children:"You have not added any items to your cart."}),(0,b.jsx)(c.Button,{asChild:!0,className:"bg-baraka-primary-300 hover:bg-baraka-lightgreen-200 w-full rounded-xs",children:(0,b.jsx)(e.default,{href:"/store",children:"Shop Now"})})]})]})}a.s(["default",()=>f],87667)},95738,a=>{"use strict";var b=a.i(90767),c=a.i(77729),d=a.i(73525),e=a.i(82742),f=a.i(26547),g=a.i(21215),h=a.i(70414),i=a.i(10014),j=a.i(38282),k=a.i(85912),l=a.i(77478),l=l;let m=({product_variant_option_id:a})=>{let{handleDeleteCart:c,isDeletingLoading:d}=(0,k.default)();return(0,b.jsxs)(j.Dialog,{children:[(0,b.jsx)(j.DialogTrigger,{asChild:!0,children:(0,b.jsx)(i.Button,{variant:"destructive",size:"icon-sm",className:"cursor-pointer hover:bg-red-700 active:scale-90",children:(0,b.jsx)(l.default,{})})}),(0,b.jsxs)(j.DialogContent,{children:[(0,b.jsxs)(j.DialogHeader,{className:"mt-5 px-2",children:[(0,b.jsx)(j.DialogTitle,{className:"text-xl",children:"Are you sure want to delete this product from your cart ?"}),(0,b.jsx)(j.DialogDescription,{className:"text-base",children:"This action cannot be undone."})]}),(0,b.jsx)(j.DialogFooter,{children:(0,b.jsxs)("div",{className:"font-geist inline-flex items-center justify-end gap-5",children:[(0,b.jsx)(j.DialogClose,{asChild:!0,children:(0,b.jsx)(i.Button,{variant:"outline",disabled:d,className:(0,e.cn)("w-24 ring",d&&"animate-pulse cursor-wait"),children:"CANCEL"})}),(0,b.jsx)(i.Button,{disabled:d,variant:"destructive",className:(0,e.cn)("w-24",d&&"animate-pulse cursor-wait"),onClick:()=>c(a),children:d?(0,b.jsx)(h.Loader2,{className:"animate-spin"}):"DELETE"})]})})]})]})},n=(0,c.memo)(({cart:a})=>{let i=a.product_variants[0].variant_options.length,{handleUpdateCart:j}=(0,k.default)(),[l,n]=(0,c.useState)({}),o=Object.values(l).some(Boolean),p=async(b,c)=>{n(a=>({...a,[b]:!0}));try{await j({product:a.product,product_variant:a.product_variants[0],variant_option:{id:b,size:a.product_variants[0].variant_options[0].size,stock:a.product_variants[0].variant_options[0].stock},quantity:c})}finally{n(a=>({...a,[b]:!1}))}};return(0,b.jsxs)("div",{className:"relative flex flex-col gap-2 rounded p-2 ring ring-black/30 hover:bg-zinc-200",children:[(0,b.jsxs)("p",{className:"absolute top-2 right-2 text-xs",children:[i," ",i>1?"items":"item"]}),(0,b.jsxs)("div",{className:"inline-flex gap-5",children:[(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)(d.default,{src:`${e.storageBaseURL}/${a.product.thumbnail}`,alt:a.product.name,unoptimized:!0,width:100,height:100,className:(0,e.cn)("aspect-square h-20 w-20 rounded object-cover sm:h-24 sm:w-24",o&&"animate-pulse opacity-70")}),o&&(0,b.jsx)(h.Loader2,{size:50,className:"text-baraka-primary-300 absolute top-1/2 left-1/2 -translate-1/2 animate-spin"})]}),(0,b.jsxs)("div",{className:"inline-flex flex-col justify-between",children:[(0,b.jsx)("p",{className:"text-xl",children:a.product.name}),(0,b.jsxs)("p",{className:"text-xl font-semibold",children:[(0,e.moneyFormatter)(a.product.price)," / item"]})]})]}),(0,b.jsxs)("div",{className:"",children:[(0,b.jsx)("p",{className:"font-semibold text-zinc-500",children:"Variant:"}),a.product_variants.map((a,c)=>(0,b.jsxs)("div",{className:"space-y-2 px-2",children:[(0,b.jsxs)("div",{className:"inline-flex items-center gap-4",children:[(0,b.jsx)("p",{className:"font-semibold",children:"Color : "}),(0,b.jsx)("div",{style:{backgroundColor:a.color},className:"h-5 w-5 rounded-full"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-semibold",children:"Size"}),(0,b.jsx)("div",{className:"flex w-full flex-col gap-2",children:a.variant_options.map((a,c)=>(0,b.jsxs)("div",{className:"inline-flex w-full justify-between",children:[(0,b.jsxs)("p",{className:"inline-flex items-center",children:[(0,b.jsx)("span",{children:(0,b.jsx)(g.Dot,{})}),a.size]}),(0,b.jsxs)("div",{className:"inline-flex items-center gap-3",children:[(0,b.jsx)(f.default,{isLoading:l[a.id]||!1,value:a.quantity,onChange:b=>p(a.id,b)}),(0,b.jsx)("hr",{className:"h-1/2 w-1 border-r border-r-black/60"}),(0,b.jsx)(m,{product_variant_option_id:a.id})]})]},c))})]})]},c))]})]})});n.displayName="CartItem";var o=a.i(9981),p=a.i(13738),q=a.i(53424);function r({carts:a,subTotal:c,showItemDetails:d=!1,className:f}){let g=(0,q.useRouter)(),{mutateCheckoutPrepare:j}=(0,o.default)({isCheckoutPage:!1}),k=j.isPending;return(0,b.jsxs)("section",{className:(0,e.cn)("mt-5 w-full flex-1 basis-1/3 space-y-5",f,d&&"md:sticky md:top-20"),children:[d&&(0,b.jsx)("div",{className:"space-y-4 text-sm md:text-xs lg:text-sm",children:a.map((a,c)=>(0,b.jsxs)("div",{className:"flex justify-between gap-1 border-b border-b-black/30 pb-2 uppercase",children:[(0,b.jsxs)("div",{className:"",children:[(0,b.jsx)("p",{children:a.product.name}),(0,b.jsxs)("div",{className:"inline-flex items-center gap-2",children:[(0,b.jsx)("div",{style:{backgroundColor:a.product_variant.color},className:"size-2 rounded-full"})," ","/ ",(0,b.jsxs)("p",{className:"text-[10px]",children:[a.variant_option.size," "]})]})]}),(0,b.jsxs)("p",{children:[(0,e.moneyFormatter)(a.product.price)," ",(0,b.jsxs)("b",{children:[" x ",a.quantity]})]})]},c))}),(0,b.jsxs)("div",{className:"inline-flex w-full items-center justify-between",children:[(0,b.jsx)("p",{className:"font-semibold text-zinc-500",children:"SUBTOTAL : "}),(0,b.jsx)("p",{className:"font-bold",children:(0,e.moneyFormatter)(c)})]}),(0,b.jsxs)("div",{className:"font-geist mt-5 inline-flex w-full flex-col items-center justify-center gap-2 uppercase",children:[(0,b.jsx)(i.Button,{disabled:k,size:"lg",className:(0,e.cn)("bg-baraka-primary-300 hover:bg-baraka-lightgreen-200 w-full cursor-pointer font-bold uppercase",k&&"animate-pulse cursor-wait"),onClick:()=>{j.mutate({source:"cart",items:[]},{onSuccess:()=>{g.push("/checkout")}})},children:k?(0,b.jsx)(h.Loader2,{className:"animate-spin"}):d?"Proceed to Checkout":"Checkout"}),!d&&(0,b.jsx)(i.Button,{asChild:!0,size:"lg",variant:"outline",className:"hover:bg-baraka-lightgreen-200 border-baraka-lightgreen-200 w-full border font-bold hover:text-white",children:(0,b.jsx)(p.default,{href:"/carts",children:"View Cart Page"})})]})]})}var s=a.i(33586);function t({carts:a,displayCartItemInfo:d=!1,variant:f="default",className:g}){let h=(0,c.useMemo)(()=>{if(!a||0===a.length)return[];let b={};for(let c of a){let a=`${c.product.id}-${c.product_variant.color}`;b[a]||(b[a]={product:c.product,product_variants:[{id:c.product_variant.id,name:c.product_variant.name,color:c.product_variant.color,weight:c.product_variant.weight,variant_options:[]}],total_quantity:0}),b[a].product_variants[0].variant_options.push({id:c.variant_option.id,size:c.variant_option.size,stock:c.variant_option.stock,quantity:c.quantity}),b[a].total_quantity+=c.quantity}return Object.values(b)},[a]),i=(0,c.useMemo)(()=>h.reduce((a,b)=>{let c=b.product.price;return a+b.total_quantity*c},0),[h]);return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:(0,e.cn)("w-full flex-1 basis-1/2 space-y-5",d&&"max-h-[500px] overflow-hidden overflow-y-auto p-1 sm:max-h-none",g),children:h.map((a,c)=>(0,b.jsx)(n,{cart:a},c))}),(0,b.jsx)(c.Activity,{mode:"default"===f||"popover"===f?"visible":"hidden",children:(0,b.jsx)(r,{carts:a,subTotal:i,showItemDetails:d})}),(0,b.jsx)(c.Activity,{mode:"drawer"===f?"visible":"hidden",children:(0,b.jsx)(s.DrawerFooter,{className:"sticky bottom-0 w-full bg-white",children:(0,b.jsx)(r,{carts:a,subTotal:i,showItemDetails:d,className:"flex-none basis-full bg-white"})})})]})}a.s(["default",()=>t],95738)}];

//# sourceMappingURL=nextjs_0af0b5fd._.js.map