module.exports=[53649,a=>{"use strict";var b=a.i(90767);let c=(0,a.i(65797).default)(async()=>{},{loadableGenerated:{modules:[19739]},ssr:!1,loading:()=>(0,b.jsx)(c,{variant:"skeleton"})});function d({product:a,className:d,displayModalQuickView:e,variant:f}){return(0,b.jsx)(c,{product:a,className:d,displayModalQuickView:e,variant:f})}a.s(["default",()=>d])},29952,a=>{"use strict";var b=a.i(90767),c=a.i(77729),d=a.i(82742),e=a.i(65797),f=a.i(73525),g=a.i(41187),h=a.i(9211);function i({photo:a}){let{handleWheel:e,doubleClickZoom:g,duringDrag:i,endDrag:j,pos:k,scale:l,dragging:m,startDragging:n}=function(){let[a,b]=(0,c.useState)(1),[d,e]=(0,c.useState)({x:0,y:0}),f=(0,c.useRef)(!1),g=(0,c.useRef)({x:0,y:0}),h=()=>{b(1),e({x:0,y:0})};return{scale:a,pos:d,reset:h,handleWheel:c=>{b(Math.min(Math.max(a+(c.deltaY>0?-.1:.1),1),4))},startDragging:b=>{1!==a&&(f.current=!0,g.current={x:b.clientX,y:b.clientY})},duringDrag:a=>{if(!f.current)return;let b=a.clientX-g.current.x,c=a.clientY-g.current.y;e(a=>({x:a.x+b,y:a.y+c})),g.current={x:a.clientX,y:a.clientY}},endDrag:()=>{f.current=!1},doubleClickZoom:()=>{1===a?b(2):h()},dragging:f}}();return(0,h.default)("(max-width: 640px)")?(0,b.jsx)(f.default,{src:`${d.storageBaseURL}/${a.photo}`,alt:a.id.toString(),width:500,height:500,unoptimized:!0,priority:!0,className:"m-auto my-5 aspect-video object-cover object-center"}):(0,b.jsx)(f.default,{src:`${d.storageBaseURL}/${a.photo}`,alt:a.id.toString(),draggable:!1,onWheel:e,onDoubleClick:g,onMouseDown:n,onMouseMove:i,onMouseUp:j,onMouseLeave:j,width:500,height:500,unoptimized:!0,priority:!0,style:{transform:`translate(${k.x}px, ${k.y}px) scale(${l})`,transition:m.current?"none":"transform 0.2s ease",cursor:l>1?m.current?"grabbing":"grab":"zoom-in"},className:"m-auto object-cover object-center sm:aspect-4/5 sm:h-full"})}let j=function({photos:a}){let[d,e]=(0,c.useState)(),[f,h]=(0,c.useState)(1),[j,k]=(0,c.useState)(a.length);return(0,c.useEffect)(()=>{if(!d)return;let b=()=>{try{let b=d.selectedScrollSnap();h(b+1),k(a.length)}catch(a){console.error("ðŸš€ ~ onSelect ~ err:",a)}};return d.on("select",b),()=>{d.off("select",b)}},[d,a.length]),(0,b.jsx)(b.Fragment,{children:(0,b.jsxs)(g.Carousel,{setApi:e,className:"relative flex h-full w-full items-center justify-center overflow-hidden",children:[(0,b.jsxs)("h2",{className:"font-geist-mono absolute top-5 left-1/2 z-2 hidden -translate-x-1/2 font-semibold text-white sm:left-0 sm:block sm:translate-x-0 sm:text-xl",children:["[",f,"/",j,"]"]}),(0,b.jsx)(g.CarouselContent,{className:"-ml-1 h-full",children:a.map((a,c)=>(0,b.jsx)(g.CarouselItem,{className:"m-auto pl-1",children:(0,b.jsx)(i,{photo:a})},c))}),1!==f&&(0,b.jsx)(g.CarouselPrevious,{className:"bottom-1/2 left-5 sm:left-20"}),f!==j&&(0,b.jsx)(g.CarouselNext,{className:"right-5 bottom-1/2 sm:right-20"})]})})};var k=a.i(34955);let l=(0,e.default)(async()=>{},{loadableGenerated:{modules:[42383]},ssr:!1});function m({product:a,activeVariantId:e,activeMainPhoto:i,onChangeMainPhoto:m}){let[n,o]=(0,c.useState)(!0),{openModal:p,setOpenModal:q}=(0,k.default)(),r=(0,c.useMemo)(()=>a.product_variants.find(a=>a.id===e),[e,a.product_variants]),s=(0,h.default)("(max-width: 640px)"),t=(0,h.default)("(min-width: 1024px)");return s?(0,b.jsx)(j,{photos:r?.photos||[]}):(0,b.jsxs)("section",{className:"flex h-[60dvh] w-full grid-cols-6 flex-col justify-center gap-2 overflow-hidden sm:h-[80dvh] sm:flex-4 lg:grid lg:flex-row",children:[(0,b.jsxs)("section",{className:"main_image relative col-span-5 h-full hover:cursor-zoom-in",children:[n&&(0,b.jsx)("div",{className:"absolute flex aspect-video w-full animate-pulse items-center justify-center bg-zinc-300 sm:h-full"}),(0,b.jsx)(f.default,{onClick:()=>q(!0),src:`${d.storageBaseURL}/${i}`,alt:a.name,width:500,height:500,unoptimized:!0,priority:!0,className:"aspect-video w-full cursor-zoom-in object-cover object-center sm:h-full",onLoad:()=>o(!1)}),(0,b.jsx)("div",{className:"absolute top-1/2 z-10 opacity-0",children:(0,b.jsx)(l,{photos:r?.photos||[],isOpen:p,setIsOpen:q})})]}),(0,b.jsx)(g.Carousel,{orientation:t?"vertical":"horizontal",opts:{align:"start",containScroll:"trimSnaps"},children:(0,b.jsxs)(g.CarouselContent,{className:"-ml-1 lg:ml-0 lg:max-h-[600px]",children:[n&&[1,2,3].map((a,c)=>(0,b.jsx)("div",{className:"mb-4 flex aspect-square h-28 w-full animate-pulse items-center justify-center bg-zinc-300"},c)),r?.photos.filter(a=>a.photo!==i).map((c,e)=>(0,b.jsx)(g.CarouselItem,{className:"list_image aspect-square basis-40 pl-1 lg:pl-0",children:(0,b.jsx)(f.default,{onClick:()=>m(c.photo),src:`${d.storageBaseURL}/${c.photo}`,alt:a.name,width:100,height:100,unoptimized:!0,priority:!0,className:"h-28 w-full object-cover object-bottom hover:cursor-pointer lg:h-full"})},e))]})})]})}var n=a.i(10014),o=a.i(21215);function p({product:a,activeVariantId:c,onChangeVariant:d}){return(0,b.jsxs)("section",{className:"font-geist mt-5",children:[(0,b.jsx)("p",{className:"mb-2 font-semibold",children:"Variant Options :"}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-x-2 gap-y-5",children:[(0,b.jsx)("p",{children:"Color"}),(0,b.jsx)("p",{children:"Size"}),a.product_variants.map((a,e)=>(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(n.Button,{type:"button",onClick:()=>d(a.id),style:{backgroundColor:a.color,outline:c===a.id?"2px solid black":"none",outlineOffset:"2px"},variant:"ghost",size:"icon"}),(0,b.jsx)("div",{className:"flex gap-2",children:a.variant_options.map((a,c)=>(0,b.jsxs)("p",{className:"inline-flex items-center",children:[(0,b.jsx)(o.Dot,{})," ",a.size]},c))})]},e))]})]})}var q=a.i(38282),r=a.i(72146),s=a.i(26547),t=a.i(70414);let u=({product:a,displayStock:c})=>(0,b.jsxs)("div",{className:"mb-5 inline-flex w-full items-start gap-4 border-b border-black pb-5",children:[(0,b.jsx)(f.default,{src:`${d.storageBaseURL}/${a.thumbnail}`,alt:a.name,width:100,height:100,unoptimized:!0,priority:!0,className:"aspect-square rounded object-cover object-center"}),(0,b.jsxs)("div",{className:"",children:[(0,b.jsx)("h3",{children:(0,d.moneyFormatter)(a.price)}),(0,b.jsxs)("p",{children:["stock: ",c]})]})]}),v=({product:a,selectColor:c,setSelectColor:e})=>{let f=Object.entries(a.product_variants.reduce((a,b)=>(a[b.color]||(a[b.color]=[]),a[b.color].push(b),a),{})).map(([a,b])=>({color:a,variants:b}));return(0,b.jsxs)("div",{className:"space-y-2 space-x-2",children:[(0,b.jsx)("h3",{children:"Select variant color"}),f.map(({color:a},f)=>(0,b.jsx)(b.Fragment,{children:(0,b.jsx)(n.Button,{onClick:()=>e(f),style:{backgroundColor:a},size:"icon-lg",className:(0,d.cn)("cursor-pointer",f===c&&"ring ring-black ring-offset-2")})},f))]})},w=({product:a,selectVariantColor:c,selectedVariantOptionId:e,handleClickSize:f})=>{let g=a.product_variants;return(0,b.jsx)("div",{className:"space-y-2",children:g.map((a,g)=>c===g&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("p",{children:"Select variant size"}),(0,b.jsx)("div",{className:"space-x-2",children:a.variant_options.map((a,c)=>(0,b.jsx)(n.Button,{onClick:()=>f(a.id,a.stock),variant:"outline",size:"icon-lg",className:(0,d.cn)("p-1.5 break-all whitespace-normal",e===a.id&&"ring ring-black ring-offset-2"),children:a.size},c))})]},g))})};var x=a.i(85912),y=a.i(83231),z=a.i(88894),A=a.i(53424),B=a.i(9981),C=a.i(45324);function D({product:a,mode:e="cart",className:f}){let g=function(a){let[b,d]=(0,c.useState)(1),[e,f]=(0,c.useState)(!1),{variant:g,option:h,handleSelectVariantOptionSize:i,selectedVariantOptionId:j,setSelectedVariantOptionId:k,setSelectVariantColor:l,selectVariantColor:m}=function(a){let[b,d]=(0,c.useState)(null),[e,f]=(0,c.useState)(0),g=a.product_variants,{variant:h,option:i}=(0,c.useMemo)(()=>(0,z.default)(g,b),[g,b]);return{selectedVariantOptionId:b,selectVariantColor:e,setSelectVariantColor:f,handleSelectVariantOptionSize:a=>{d(a)},setSelectedVariantOptionId:d,variant:h,option:i}}(a),n=a.variant_stock,o=h?h.stock:n,p=(0,c.useCallback)(()=>{d(1),l(0),k(null)},[l,k]),q=(0,c.useCallback)(a=>{f(a),a||p()},[p]);return{quantity:b,setQuantity:d,variant:g,displayStock:o,resetState:p,option:h,openModal:e,setOpenModal:f,handleSelectVariantOptionSize:i,selectedVariantOptionId:j,selectVariantColor:m,setSelectVariantColor:l,onChangeOpenModal:q}}(a),{submit:h,isAddingLoading:i}=function(a,b){let{handleAddToCart:d,isAddingLoading:e}=(0,x.default)();return{isAddingLoading:e,submit:(0,c.useCallback)(c=>{(c.preventDefault(),b.option&&b.variant)?(d({product:{id:a.id,name:a.name,price:a.price,slug:a.slug,thumbnail:a.thumbnail},product_variant:{id:b.variant.id,name:b.variant.name,color:b.variant.color,weight:b.variant.weight},variant_option:b.option,quantity:b.quantity}),b.setOpenModal(!1),b.resetState()):y.toast.info("Please Select Variant Size",{duration:3e3,position:"top-right"})},[d,a,b])}}(a,g),{submitBuyNow:j,isBuyingLoading:k}=function(a){let b=(0,A.useRouter)(),{mutateCheckoutPrepare:d}=(0,B.default)(),{isAuthenticated:e}=(0,C.useAuth)(),f=(0,A.useSearchParams)(),g=(0,A.usePathname)(),h=`${g}?${f.toString()}`;return{submitBuyNow:(0,c.useCallback)(c=>{(c.preventDefault(),e)?a.option&&a.variant?d.mutate({source:"buy_now",items:[{product_variant_option_id:a.option.id,quantity:a.quantity}]},{onSuccess:()=>{b.push("/checkout")}}):y.toast.info("Please Select Variant Size",{duration:3e3,position:"top-right"}):y.toast.info("Please Login First",{duration:3e3,position:"top-right",onAutoClose:()=>{b.push(`/auth/login?redirect=${encodeURIComponent(h)}`)}})},[d,a,b,e,h]),isBuyingLoading:d.isPending}}(g);return(0,b.jsxs)(q.Dialog,{open:g.openModal,onOpenChange:g.onChangeOpenModal,children:[(0,b.jsx)(q.DialogTrigger,{asChild:!0,children:(0,b.jsx)(n.Button,{size:"lg",className:(0,d.cn)("bg-baraka-lightgreen-200 mt-10 w-full cursor-pointer rounded-none py-2 text-white","buy"===e&&"bg-black",f),children:"cart"===e?"Add to Cart":"Buy Now"})}),(0,b.jsxs)(q.DialogContent,{className:(0,d.cn)("data-[state=open]:backdrop-blur-lg",g.openModal&&"backdrop-blur-lg"),children:[(0,b.jsxs)(r.VisuallyHidden,{children:[(0,b.jsx)(q.DialogTitle,{}),(0,b.jsx)(q.DialogDescription,{})]}),(0,b.jsxs)("section",{className:"",children:[(0,b.jsx)(u,{product:a,displayStock:g.displayStock}),(0,b.jsxs)("section",{className:"mt-2 flex flex-col gap-5",children:[(0,b.jsx)(v,{product:a,selectColor:g.selectVariantColor,setSelectColor:g.setSelectVariantColor}),(0,b.jsx)(w,{product:a,selectVariantColor:g.selectVariantColor,selectedVariantOptionId:g.selectedVariantOptionId,handleClickSize:g.handleSelectVariantOptionSize}),(0,b.jsxs)("form",{onSubmit:"cart"===e?h:j,className:"space-y-5",children:[null!==g.selectedVariantOptionId&&(0,b.jsxs)("div",{className:"inline-flex w-full items-center justify-between",children:[(0,b.jsx)("h3",{children:"Quantity"}),(0,b.jsx)(s.default,{value:g.quantity,onChange:g.setQuantity})]}),(0,b.jsx)(n.Button,{type:"submit",className:"bg-baraka-lightgreen-200 mt-2 w-full",children:("cart"===e?i:k)?(0,b.jsx)(t.Loader2,{className:"animate-spin"}):"cart"===e?"Add To Cart":"Buy Now"})]})]})]})]})]})}var E=a.i(13738);function F({product:a}){return(0,b.jsxs)("div",{className:"font-krub space-x-2 text-sm font-bold text-zinc-400 uppercase",children:[(0,b.jsx)(E.default,{href:`/store?category=${a.sub_category.category.slug}`,children:a.sub_category.category.name}),(0,b.jsx)("span",{children:"/"}),(0,b.jsx)(E.default,{href:`/store?sub_category=${a.sub_category.slug}`,children:a.sub_category.name})]})}function G({product:a,activeVariantId:c,onChangeVariant:e}){return(0,b.jsx)("section",{className:"font-geist border-black sm:flex-3",children:(0,b.jsxs)("div",{className:"product-info font-krona-one w-full p-5 lg:basis-1/3 lg:p-0",children:[(0,b.jsxs)("section",{className:"space-y-5",children:[(0,b.jsx)(F,{product:a}),(0,b.jsx)("h1",{className:"mb-2 text-2xl capitalize",children:a.name}),(0,b.jsx)("p",{className:"text-xl",children:(0,d.moneyFormatter)(a.price)})]}),(0,b.jsx)("hr",{className:"my-5"}),(0,b.jsxs)("div",{className:"font-geist space-y-3",children:[(0,b.jsx)("p",{className:"font-bold",children:"Description"}),(0,b.jsx)("div",{className:"text-justify indent-8",dangerouslySetInnerHTML:{__html:a.description}})]}),(0,b.jsx)(p,{product:a,activeVariantId:c,onChangeVariant:e}),(0,b.jsxs)("div",{className:"mt-10 flex w-full flex-col items-center gap-4 overflow-hidden sm:flex-row sm:justify-end",children:[(0,b.jsx)(D,{product:a,mode:"buy",className:"mt-0 sm:basis-2/5"}),(0,b.jsx)(D,{product:a,className:"mt-0 sm:basis-2/5"})]})]})})}a.s(["default",0,({product:a})=>{let d=a.product_variants[0],e=d.photos[0].photo,[f,g]=(0,c.useState)(d.id),[h,i]=(0,c.useState)(e);return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(m,{product:a,activeVariantId:f,activeMainPhoto:h,onChangeMainPhoto:i}),(0,b.jsx)(G,{product:a,activeVariantId:f,onChangeVariant:b=>{let c=a.product_variants.find(a=>a.id===b);c&&(g(b),i(c.photos[0].photo))}})]})}],29952)}];

//# sourceMappingURL=nextjs_beda9630._.js.map