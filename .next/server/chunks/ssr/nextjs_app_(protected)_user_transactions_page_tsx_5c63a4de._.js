module.exports=[84202,a=>{"use strict";var b=a.i(90767),c=a.i(74568),d=a.i(31127),e=a.i(8718),f=class extends d.QueryObserver{constructor(a,b){super(a,b)}bindMethods(){super.bindMethods(),this.fetchNextPage=this.fetchNextPage.bind(this),this.fetchPreviousPage=this.fetchPreviousPage.bind(this)}setOptions(a){super.setOptions({...a,behavior:(0,e.infiniteQueryBehavior)()})}getOptimisticResult(a){return a.behavior=(0,e.infiniteQueryBehavior)(),super.getOptimisticResult(a)}fetchNextPage(a){return this.fetch({...a,meta:{fetchMore:{direction:"forward"}}})}fetchPreviousPage(a){return this.fetch({...a,meta:{fetchMore:{direction:"backward"}}})}createResult(a,b){let{state:c}=a,d=super.createResult(a,b),{isFetching:f,isRefetching:g,isError:h,isRefetchError:i}=d,j=c.fetchMeta?.fetchMore?.direction,k=h&&"forward"===j,l=f&&"forward"===j,m=h&&"backward"===j,n=f&&"backward"===j;return{...d,fetchNextPage:this.fetchNextPage,fetchPreviousPage:this.fetchPreviousPage,hasNextPage:(0,e.hasNextPage)(b,c.data),hasPreviousPage:(0,e.hasPreviousPage)(b,c.data),isFetchNextPageError:k,isFetchingNextPage:l,isFetchPreviousPageError:m,isFetchingPreviousPage:n,isRefetchError:i&&!k&&!m,isRefetching:g&&!l&&!n}}},g=a.i(65904),h=a.i(78977),i=a.i(82742),j=a.i(77729);let k=({date:a,className:c})=>{let d=(0,j.useRef)(null);return(0,j.useEffect)(()=>{if(!a)return;let b=a.includes("T")?a:a.replace(" ","T"),c=()=>{let a=new Date().getTime(),c=new Date(b).getTime(),e=c-a;if(isNaN(c)){d.current&&(d.current.textContent="Invalid Date");return}if(e<=0){d.current&&(d.current.textContent="Expired");return}let f=Math.floor(e/36e5),g=Math.floor(e%36e5/6e4),h=Math.floor(e%6e4/1e3),i=`${f.toString().padStart(2,"0")}:${g.toString().padStart(2,"0")}:${h.toString().padStart(2,"0")}`;console.log("ðŸš€ ~ updateCountDown ~ formattedTime:",i),d.current&&(d.current.textContent=i)};c();let e=setInterval(c,1e3);return()=>clearInterval(e)},[a]),(0,b.jsx)("span",{ref:d,"aria-live":"polite",className:(0,i.cn)(c)})};var l=a.i(83038),m=a.i(52424),n=a.i(73852);let o=(0,a.i(65797).default)(()=>a.A(56074),{loadableGenerated:{modules:[97061]},loading:()=>(0,b.jsx)("p",{children:"Loading..."})}),p=({transaction:a})=>{if(!a)return null;a.expired_at?.includes("T")?a.expired_at:a.expired_at?.replace(" ","T"),console.log("ðŸš€ ~ CardItemTransasction ~ isExpired:",new Date(a.expired_at)<=new Date);let c=a.status;return(0,b.jsx)(n.Card,{className:"font-geist rounded-sm p-2",children:(0,b.jsxs)(n.CardContent,{className:"space-y-4 p-2",children:[(0,b.jsxs)(n.CardTitle,{className:"item-center flex justify-between border-b pb-2",children:[(0,b.jsx)("p",{children:a.order_id}),(0,b.jsx)("p",{className:"text-baraka-primary-300 font-normal uppercase",children:a.status})]}),a.transaction_items.map((a,c)=>{let d=a.product_variant_option.product_variant.product,e=a.product_variant_option.product_variant;return(0,b.jsxs)("div",{className:"flex items-start gap-4",children:[(0,b.jsx)(l.default,{src:`${i.storageBaseURL}/${d.thumbnail}`,alt:"thumbnail",width:100,height:100,className:"aspect-square size-20 w-auto object-cover object-center"}),(0,b.jsxs)("div",{className:"xs:text-base inline-flex w-full items-start justify-between text-sm",children:[(0,b.jsxs)("div",{className:"",children:[(0,b.jsx)("p",{className:"capitalize",children:d.name}),(0,b.jsxs)("div",{className:"text-xs text-zinc-400",children:["Variant :"," ",(0,b.jsxs)("span",{className:"inline-flex items-center gap-2",children:["Color :",(0,b.jsx)("div",{className:"size-3 rounded-full",style:{backgroundColor:e.color}})]}),","," ",(0,b.jsxs)("span",{className:"",children:["Size : ",a.product_variant_option.size]})]}),(0,b.jsxs)("p",{className:"mt-4",children:["x",a.quantity]})]}),(0,b.jsx)("p",{className:"text-baraka-primary-300 text-sm",children:(0,i.moneyFormatter)(d.price)})]})]},c)}),(0,b.jsxs)(n.CardFooter,{className:"xs:mt-0 mt-10 flex flex-col items-end justify-between gap-5 px-0",children:[(0,b.jsxs)("p",{className:"text-sm",children:["Total Transaction :"," ",(0,b.jsx)("span",{className:"text-baraka-primary-300 xs:text-base inline-flex items-center text-sm font-medium",children:(0,i.moneyFormatter)(a.total_price)})]}),(0,b.jsxs)("div",{className:(0,i.cn)("w-full","canceled"===c||"expire"===c&&"xs:flex-row flex flex-col items-center justify-between gap-4"),children:[(0,b.jsx)(j.Activity,{mode:"canceled"===c||"expire"===c?"visible":"hidden",children:(0,b.jsxs)("p",{className:"text-xs text-zinc-400",children:["The transaction was canceled by the Baraka Hijab system.",(0,b.jsx)("span",{className:"ms-1 inline-flex items-center-safe",children:(0,b.jsx)(m.default,{message:(0,b.jsxs)("div",{className:"text-black",children:[(0,b.jsx)("p",{children:"Transaction canceled because :"}),(0,b.jsx)("p",{children:"expire"===c?"No payment":"canceled"===c&&"Canceled by user"})]}),iconable:!0,variant:"info",size:"sm",className:"w-full flex-1 text-black"})})]})}),(0,b.jsx)(j.Activity,{mode:"pending"===c?"visible":"hidden",children:(0,b.jsxs)("p",{className:"text-xs text-zinc-400",children:["The transaction will expire in"," ",(0,b.jsx)(k,{date:a.expired_at})]})}),(0,b.jsx)(o,{transaction:a})]})]})]})},a.id)};var q=a.i(31498);let r=(0,q.default)("refresh-ccw",[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]]);var s=a.i(10014);let t=({hasMore:a,onIntersect:c})=>{let d=(0,j.useRef)(null);return(0,j.useEffect)(()=>{if(!a)return;let b=d.current,e=new IntersectionObserver(a=>{a[0].isIntersecting&&c&&c()},{threshold:1});return b&&e.observe(b),()=>{b&&e.unobserve(b)}},[a,c]),(0,b.jsx)("div",{ref:d,className:"h-1"})},u=()=>Array.from({length:5}).map((a,c)=>(0,b.jsx)(n.Card,{className:"font-geist mb-3 overflow-hidden rounded-sm p-2",children:(0,b.jsxs)(n.CardContent,{className:"xs:p-2 space-y-4 p-4",children:[(0,b.jsxs)(n.CardTitle,{className:"item-center flex justify-between border-b pb-2",children:[(0,b.jsx)("div",{className:"h-6 w-32 animate-pulse rounded-xs bg-zinc-300"}),(0,b.jsx)("div",{className:"h-6 w-20 animate-pulse rounded-xs bg-zinc-300"})]}),(0,b.jsxs)("div",{className:"flex items-start gap-4",children:[(0,b.jsx)("div",{className:"aspect-square size-20 w-auto animate-pulse bg-zinc-300 object-cover object-center"}),(0,b.jsxs)("div",{className:"inline-flex w-full items-start justify-between",children:[(0,b.jsxs)("div",{className:"",children:[(0,b.jsx)("div",{className:"mb-2 h-6 w-56 animate-pulse rounded-xs bg-zinc-300"}),(0,b.jsxs)("div",{className:"flex items-center space-x-4 text-xs text-zinc-400",children:[(0,b.jsx)("div",{className:"h-4 w-18 animate-pulse rounded-xs bg-zinc-300"}),(0,b.jsx)("div",{className:"h-4 w-10 animate-pulse rounded-xs bg-zinc-300"})]}),(0,b.jsx)("div",{className:"mt-4 aspect-square h-6 animate-pulse rounded-xs bg-zinc-300"})]}),(0,b.jsx)("div",{className:"h-6 w-32 animate-pulse rounded-xs bg-zinc-300"})]})]}),(0,b.jsxs)(n.CardFooter,{className:"flex flex-col items-end justify-between gap-5 px-0",children:[(0,b.jsx)("div",{className:"h-6 w-56 animate-pulse rounded-xs bg-zinc-300"}),(0,b.jsxs)("div",{className:"flex items-center gap-5",children:[(0,b.jsx)("div",{className:"h-8 w-32 animate-pulse rounded-xs bg-zinc-300"}),(0,b.jsx)("div",{className:"h-8 w-32 animate-pulse rounded-xs bg-zinc-300"}),(0,b.jsx)("div",{className:"h-8 w-32 animate-pulse rounded-xs bg-zinc-300"})]})]})]})},c)),v=({transactions:a,isFetchingNextPage:d,isError:e,hasNextPage:f,refetch:g,fetchNextPage:h,value:i="all"})=>(0,b.jsxs)(c.TabsContent,{value:i,className:"",children:[(0,b.jsx)("section",{className:"space-y-3",children:a?.map(a=>(0,b.jsx)(p,{transaction:a},a.id))}),d&&(0,b.jsx)("section",{className:"my-3 w-full",children:(0,b.jsx)(u,{})}),e&&(0,b.jsx)(s.Button,{className:"mx-auto my-10",variant:"ghost",size:"icon-lg",onClick:()=>g(),children:(0,b.jsx)(r,{})}),(0,b.jsx)(t,{hasMore:!!f,onIntersect:()=>h()})]}),w={src:a.i(53496).default,width:1028,height:530,blurWidth:0,blurHeight:0};var x=a.i(73525);let y=({status:a})=>(0,b.jsxs)("section",{className:"font-geist space-y-10 bg-white py-10 text-center sm:min-h-[50vh]",children:[(0,b.jsx)(x.default,{alt:"svg",className:"mx-auto size-1/2",src:w}),(0,b.jsxs)("h1",{className:"text-xl font-semibold sm:text-4xl",children:["You don't have ","all"===a||"pending"===a||"paid"===a?"any transactions":"canceled"===a?"canceled transactions":"expire"===a&&"expired payments"," right now."]})]});var z=a.i(23613);let A=(0,q.default)("calendar-x-2",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M21 13V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h8",key:"3spt84"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"m17 22 5-5",key:"1k6ppv"}],["path",{d:"m17 17 5 5",key:"p7ous7"}]]),B=(0,q.default)("clock-alert",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["path",{d:"M20 12v5",key:"12wsvk"}],["path",{d:"M20 21h.01",key:"1p6o6n"}],["path",{d:"M21.25 8.2A10 10 0 1 0 16 21.16",key:"17fp9f"}]]),C=(0,q.default)("hand-coins",[["path",{d:"M11 15h2a2 2 0 1 0 0-4h-3c-.6 0-1.1.2-1.4.6L3 17",key:"geh8rc"}],["path",{d:"m7 21 1.6-1.4c.3-.4.8-.6 1.4-.6h4c1.1 0 2.1-.4 2.8-1.2l4.6-4.4a2 2 0 0 0-2.75-2.91l-4.2 3.9",key:"1fto5m"}],["path",{d:"m2 16 6 6",key:"1pfhp9"}],["circle",{cx:"16",cy:"9",r:"2.9",key:"1n0dlu"}],["circle",{cx:"6",cy:"5",r:"3",key:"151irh"}]]),D=(0,q.default)("package-check",[["path",{d:"m16 16 2 2 4-4",key:"gfu2re"}],["path",{d:"M21 10V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l2-1.14",key:"e7tb2h"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["line",{x1:"12",x2:"12",y1:"22",y2:"12",key:"a4e8g8"}]]);var E=a.i(75133),F=a.i(53424);function G(){let a=(0,F.useSearchParams)(),d=(0,F.useRouter)(),e=a.get("status")??"all",{data:i,refetch:k,fetchNextPage:l,hasNextPage:m,isFetchingNextPage:n,isError:o,isLoading:p}=function({per_page:a=10,status:b="all"}={}){var c;return c={queryKey:["transactions",{status:b,per_page:a}],queryFn:async({pageParam:c})=>h.default.getTransactions({cursor:c,per_page:a,status:b}),getNextPageParam:a=>a.meta.has_next?a.meta.next_cursor:void 0,initialPageParam:void 0},(0,g.useBaseQuery)(c,f,void 0)}({per_page:5,status:e}),q=i?.pages.flatMap(a=>a.data);return(0,b.jsx)("main",{className:"",children:(0,b.jsxs)(c.Tabs,{defaultValue:e,onValueChange:b=>{let c=(0,z.default)({key:"status",searchParams:a,value:b});d.push(`?${c}`,{scroll:!1})},children:[(0,b.jsx)(c.TabsList,{className:"xs:overflow-x-auto hide-scrollbar my-10 flex h-14 w-full items-center justify-between overflow-x-scroll rounded-xs",children:H.map(a=>(0,b.jsx)(c.TabsTrigger,{value:a.value,className:"data-[state=active]:bg-baraka-primary-300 rounded-xs data-[state=active]:text-white",children:a.label},a.label))}),(0,b.jsx)(j.Activity,{mode:p?"visible":"hidden",children:(0,b.jsx)(u,{})}),(0,b.jsx)(j.Activity,{mode:q?.length?"hidden":"visible",children:(0,b.jsx)(y,{status:e})}),(0,b.jsx)(v,{value:e,transactions:q,hasNextPage:m,isFetchingNextPage:n,refetch:k,fetchNextPage:l,isError:o})]})})}let H=[{value:"all",label:"All Transactions",icon:C},{value:"pending",label:"Waiting Payments",icon:B},{value:"paid",label:"Done Transactions",icon:D},{value:"canceled",label:"Canceled Transactions",icon:E.XCircleIcon},{value:"expire",label:"Expired Payments",icon:A}];a.s(["default",()=>G],84202)}];

//# sourceMappingURL=nextjs_app_%28protected%29_user_transactions_page_tsx_5c63a4de._.js.map