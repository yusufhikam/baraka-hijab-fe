{"version":3,"sources":["../../../../../nextjs/components/ui/card.tsx","../../../../../nextjs/node_modules/lucide-react/src/icons/check.ts","../../../../../nextjs/utils/QueryBuilder.ts","../../../../../nextjs/entities/transactions/api/transactionApi.ts","../../../../../nextjs/app/%28protected%29/checkout/success/page.tsx","../../../../../nextjs/entities/transactions/hooks/useValidateTransaction.ts","../../../../../nextjs/features/_checkout/_components/CheckoutSuccessSkeleton.tsx"],"sourcesContent":["import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction Card({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card\"\n      className={cn(\n        \"bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction CardHeader({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-header\"\n      className={cn(\n        \"@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction CardTitle({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-title\"\n      className={cn(\"leading-none font-semibold\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction CardDescription({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-description\"\n      className={cn(\"text-muted-foreground text-sm\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction CardAction({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-action\"\n      className={cn(\n        \"col-start-2 row-span-2 row-start-1 self-start justify-self-end\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction CardContent({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-content\"\n      className={cn(\"px-6\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction CardFooter({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-footer\"\n      className={cn(\"flex items-center px-6 [.border-t]:pt-6\", className)}\n      {...props}\n    />\n  )\n}\n\nexport {\n  Card,\n  CardHeader,\n  CardFooter,\n  CardTitle,\n  CardAction,\n  CardDescription,\n  CardContent,\n}\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [['path', { d: 'M20 6 9 17l-5-5', key: '1gmf2c' }]];\n\n/**\n * @component @name Check\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMjAgNiA5IDE3bC01LTUiIC8+Cjwvc3ZnPgo=) - https://lucide.dev/icons/check\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Check = createLucideIcon('check', __iconNode);\n\nexport default Check;\n","import { ProductParamsQuery } from \"@/entities/product/types/productParamQuery.type\";\r\nimport { TransactionsQueryParams } from \"@/entities/transactions/types/transactionQueryParam.type\";\r\n\r\nexport default function buildQueryString(\r\n  query: ProductParamsQuery | TransactionsQueryParams,\r\n) {\r\n  const queryParams = new URLSearchParams();\r\n\r\n  Object.entries(query).forEach(([key, value]) => {\r\n    if (value !== undefined) {\r\n      queryParams.append(key, String(value));\r\n    }\r\n  });\r\n\r\n  return queryParams.toString();\r\n}\r\n","import ApiClient from \"@/lib/axios/apiClient\";\r\nimport { baseApiURL } from \"@/lib/utils\";\r\nimport { ApiResponse } from \"@/types/apiResponse.type\";\r\nimport {\r\n  TransactionApiResponse,\r\n  TransactionType,\r\n} from \"../types/transaction.type\";\r\nimport { AxiosResponse } from \"axios\";\r\nimport buildQueryString from \"@/utils/QueryBuilder\";\r\nimport { TransactionsQueryParams } from \"../types/transactionQueryParam.type\";\r\n\r\nconst transactionApi = {\r\n  async getTransactions(params: TransactionsQueryParams) {\r\n    try {\r\n      const res: AxiosResponse<TransactionApiResponse<TransactionType[]>> =\r\n        await ApiClient.get(\r\n          `${baseApiURL}/user/transactions?${buildQueryString(params)}`,\r\n        );\r\n\r\n      return res.data;\r\n    } catch (err) {\r\n      console.error(\"ðŸš€ ~ err:\", err);\r\n      throw err;\r\n    }\r\n  },\r\n  async validateTransactionOwnership(\r\n    order_id: string,\r\n  ): Promise<ApiResponse<null>> {\r\n    const res = await ApiClient.get(\r\n      `${baseApiURL}/user/transaction/validate/${order_id}`,\r\n    );\r\n\r\n    return res.data;\r\n  },\r\n};\r\n\r\nexport default transactionApi;\r\n","\"use client\";\r\n\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Card, CardContent, CardFooter } from \"@/components/ui/card\";\r\nimport useValidateTransasctionQuery from \"@/entities/transactions/hooks/useValidateTransaction\";\r\nimport CheckoutSuccessSkeleton from \"@/features/_checkout/_components/CheckoutSuccessSkeleton\";\r\nimport { Check } from \"lucide-react\";\r\nimport { useRouter, useSearchParams } from \"next/navigation\";\r\nimport { useLayoutEffect } from \"react\";\r\nimport { toast } from \"sonner\";\r\n\r\nexport default function CheckoutSuccessPage() {\r\n  const searchParams = useSearchParams();\r\n  const router = useRouter();\r\n\r\n  const order_id = searchParams.get(\"order_id\");\r\n\r\n  const { data, isLoading, isError, isSuccess } = useValidateTransasctionQuery({\r\n    order_id,\r\n  });\r\n\r\n  useLayoutEffect(() => {\r\n    if (!order_id) {\r\n      toast.error(\"Invalid to access page.\", { position: \"top-right\" });\r\n      router.replace(\"/\");\r\n      return;\r\n    }\r\n\r\n    if (isError) {\r\n      toast.error(\"Failed to validate transaction.\", { position: \"top-right\" });\r\n      router.replace(\"/\");\r\n    }\r\n\r\n    if (isSuccess && data.status === false) {\r\n      toast.info(\"Transaction not found or not paid.\", {\r\n        position: \"top-right\",\r\n      });\r\n\r\n      router.replace(\"/user/transactions\");\r\n    }\r\n  }, [router, order_id, data, isSuccess, isError]);\r\n\r\n  if (isLoading) {\r\n    return <CheckoutSuccessSkeleton />;\r\n  }\r\n\r\n  if (isSuccess && data.status === true) {\r\n    return (\r\n      <main className=\"container-fluid mx-auto flex min-h-dvh items-baseline justify-center bg-zinc-300\">\r\n        <Card className=\"m-auto max-w-2xl rounded-sm\">\r\n          <CardContent>\r\n            <div className=\"space-y-6\">\r\n              <div className=\"relative\">\r\n                <Check\r\n                  size={50}\r\n                  className=\"bg-baraka-primary-300 relative z-5 mx-auto rounded-full p-1.5 text-white\"\r\n                />\r\n                <div className=\"bg-baraka-primary-400 absolute inset-1/2 z-1 size-10 -translate-x-1/2 -translate-y-1/2 animate-ping rounded-full\" />\r\n              </div>\r\n\r\n              <div className=\"font-geist space-y-2 text-center\">\r\n                <h1 className=\"text-4xl\">Thank you for your purchase !</h1>\r\n                <p>\r\n                  We&apos;ve receive your order. Please wait for the shipment or\r\n                  track your order.\r\n                </p>\r\n              </div>\r\n            </div>\r\n          </CardContent>\r\n\r\n          <CardFooter className=\"mt-10 flex items-center justify-center gap-5\">\r\n            <Button\r\n              className=\"bg-baraka-primary-300 uppercase\"\r\n              onClick={() => router.replace(\"/user/transactions\")}\r\n            >\r\n              Track your orders\r\n            </Button>\r\n            <Button\r\n              variant={\"outline\"}\r\n              className=\"uppercase\"\r\n              onClick={() => router.replace(\"/\")}\r\n            >\r\n              Back to Homepage\r\n            </Button>\r\n          </CardFooter>\r\n        </Card>\r\n      </main>\r\n    );\r\n  }\r\n\r\n  // fallback return\r\n  return null;\r\n}\r\n","import { useQuery } from \"@tanstack/react-query\";\r\nimport transactionApi from \"../api/transactionApi\";\r\n\r\ntype ValidateTransactionProps = {\r\n  order_id: string | null;\r\n};\r\n\r\nexport default function useValidateTransasctionQuery({\r\n  order_id,\r\n}: ValidateTransactionProps) {\r\n  return useQuery({\r\n    queryKey: [\"validate-transaction\", order_id],\r\n    queryFn: () => transactionApi.validateTransactionOwnership(order_id || \"\"),\r\n    enabled: !!order_id,\r\n    staleTime: 0,\r\n    retry: false,\r\n  });\r\n}\r\n","import { Card, CardContent } from \"@/components/ui/card\";\r\nimport { Loader2 } from \"lucide-react\";\r\n\r\nexport default function CheckoutSuccessSkeleton() {\r\n  return (\r\n    <main className=\"container-fluid mx-auto flex min-h-dvh items-baseline justify-center bg-zinc-300\">\r\n      <Card className=\"m-auto flex min-h-[400px] max-w-2xl min-w-2xl items-center justify-center rounded-sm\">\r\n        <CardContent>\r\n          <Loader2\r\n            className=\"text-baraka-primary-300 m-auto animate-spin\"\r\n            size={80}\r\n            strokeWidth={1}\r\n          />\r\n        </CardContent>\r\n      </Card>\r\n    </main>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}